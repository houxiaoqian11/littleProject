<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="product_ex">

	<resultMap id="abatorgenerated_ProductResult" class="cn.guddqs.peakshop.entity.Product">
		<!-- WARNING - This element is automatically generated by Abator for iBATIS, 
			do not modify. This element was generated on Thu Aug 31 16:55:54 CST 2017. -->
		<result column="id" jdbcType="INTEGER" property="id" />
		<result column="name" jdbcType="VARCHAR" property="name" />
		<result column="picture" jdbcType="VARCHAR" property="picture" />
		<result column="price" jdbcType="DOUBLE" property="price" />
		<result column="prevprice" jdbcType="DOUBLE" property="prevprice" />
		<result column="type_id" jdbcType="INTEGER" property="typeId" />
		<result column="is_show" jdbcType="INTEGER" property="isShow" />
		<result column="is_hot" jdbcType="INTEGER" property="isHot" />
		<result column="is_discount" jdbcType="INTEGER" property="isDiscount" />
		<result column="is_groupbuy" jdbcType="INTEGER" property="isGroupbuy" />
		<result column="groupbuy_price" jdbcType="DOUBLE" property="groupbuyPrice" />
		<result column="groupbuy_num" jdbcType="INTEGER" property="groupbuyNum" />
		<result column="show_time" jdbcType="TIMESTAMP" property="showTime" />
		<result column="edit_time" jdbcType="TIMESTAMP" property="editTime" />
		<result column="is_new" jdbcType="INTEGER" property="isNew" />
		<result column="product_no" jdbcType="VARCHAR" property="productNo" />
	</resultMap>

	<insert id="abatorgenerated_insert" parameterClass="cn.guddqs.peakshop.entity.Product">
		<!-- WARNING - This element is automatically generated by Abator for iBATIS, 
			do not modify. This element was generated on Wed Aug 30 10:40:21 CST 2017. -->
		insert into product (id, name, picture, price, prevprice, type_id,
		is_show, is_hot, is_discount,groupbuy_num,is_groupbuy,groupbuy_price,
		show_time, edit_time, is_new, product_no)
		values (#id:INTEGER#, #name:VARCHAR#, #picture:VARCHAR#, #price:DOUBLE#,
		#prevprice:DOUBLE#,#typeId:INTEGER#, #isShow:INTEGER#, #isHot:INTEGER#, 
		#isDiscount:INTEGER#,#isGroupbuy:INTEGER#,#groupbuyPrice:DOUBLE#,#groupbuyNum:INTEGER#,
		#showTime:TIMESTAMP#, #editTime:TIMESTAMP#, #isNew:INTEGER#,
		#productNo:VARCHAR#)
		<selectKey resultClass="Integer" keyProperty="id">
			SELECT LAST_INSERT_ID()
		</selectKey>
	</insert>

	<select id="getProductListEx" resultMap="abatorgenerated_ProductResult"
		parameterClass="java.util.Map">
		select p.* from product p where 1=1
		<isNotEmpty prepend="AND" property="typeId">
			p.type_id = #typeId:INTEGER#
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="isShow">
			p.is_show = #isShow:INTEGER#
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="name">
			p.name like concat('%', #name#, '%')
		</isNotEmpty>
		order by p.edit_time desc
	</select>

</sqlMap>